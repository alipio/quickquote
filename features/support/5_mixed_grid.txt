require 'capybara/cucumber'
require 'selenium-webdriver'

Before('@chrome') do
  Capybara.register_driver :selenium do |app|
    browser_required = Selenium::WebDriver::Remote::Capabilities.new({:browser_name=>"chrome", :javascript_enabled=>true})
    Capybara::Selenium::Driver.new(app, :browser => :remote, :url => "http://localhost:4444/wd/hub", :desired_capabilities => browser_required)
  end
end

Before('~@chrome') do
  Capybara.register_driver :selenium do |app|
    browser_required = Selenium::WebDriver::Remote::Capabilities.new({:browser_name=>"phantomjs", :javascript_enabled=>true})
    Capybara::Selenium::Driver.new(app, :browser => :remote, :url => "http://localhost:4444/wd/hub", :desired_capabilities => browser_required)
  end
end

Capybara.default_driver  = :selenium
Capybara.configure do |config|
  config.run_server = false
  config.app_host   = "http://sydneytesters.herokuapp.com"
end